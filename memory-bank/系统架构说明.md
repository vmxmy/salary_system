# 🏭 系统架构大白话解释

大家好！让我们用一个通俗易懂的方式来理解这个工资信息管理系统是怎么运作的，就像参观一个自动化工厂一样：

## 1. 👤 用户来了 (User Interaction)

*   你就好比是顾客 🧍‍♂️🧍‍♀️，通过你的**电脑浏览器** 💻 来访问这个系统。

## 2. 🏪 店面和后台 (Web Application)

*   你首先看到的是**网站的前台界面** ✨ (React Frontend)，就像商店的展示区，有各种按钮🔘、表格📊让你操作。这个界面是用 React、Vite 和 Ant Design 这些技术做的，让它看起来漂亮又好用。
*   你在前台做的操作（比如上传文件📄、查询数据🔍），都会通过**网络请求** 🌐 (API Calls) 发送到**网站的后台服务** ⚙️ (FastAPI Backend)。后台就像是商店的办公室和仓库，负责处理你的请求、管理数据、执行计算。它是用 Python 和 FastAPI 技术构建的。

## 3. 🛠️ 数据的处理和仓库 (Data Processing & Storage)

*   **数据怎么进来？** 🤔
    *   **手动方式：** 你可以把**工资表格** 📝 (Excel Files) 通过网站上传。后台会调用一个 **Python 脚本** 🐍 (Python Scripts) 先把这些表格整理干净、统一格式、重命名，变成**标准的 CSV 文件** 📄 (CSV Folder)。然后，后台的**上传接口** 📤 (Manual Upload API) 会把这些 CSV 文件里的数据读出来，先放到一个叫**“原始工资暂存表”** 📥 (Staging Table) 的地方。
    *   **自动方式 (计划中):** 以后系统可以直接从那个**标准的 CSV 文件夹** 📁 (CSV Folder) 里，通过一个叫 **Airbyte** 💨 的工具，自动把数据同步到**“原始工资暂存表”**。
*   **数据放哪里？** 🗄️
    *   所有的数据最终都存放在一个叫 **PostgreSQL** 的**数据库** 🐘 (Database Core) 里。这个数据库就像一个大文件柜。
    *   里面有不同的“抽屉”：一个是刚才说的**“暂存表”**，放刚进来的原始数据；还有一些是**“核心表”** 🗂️ (Core Tables)，存放整理好的正式数据，比如员工信息、部门信息等；还有专门给报表用的**“数据集市表”和“计算视图”** 📈 (dbt Marts & Views)。
*   **数据怎么整理？** ✨
    *   一个叫 **dbt** 💧 的工具负责把“暂存表”里的原始数据进行清洗、计算、转换，然后放到“核心表”和专门的“报表视图”里，让数据变得规整、可用。
    *   另一个叫 **Alembic** 🧪 的工具，负责管理数据库里这些“抽屉”（表）的结构，比如需要加个新抽屉或者修改抽屉格子的时候，它来保证操作正确。

## 4. 📊 看报表 (Reporting Tools)

*   当数据都整理好之后，就可以用专门的**报表工具**来看分析结果了。这里用了两个工具：**Metabase** Ⓜ️ 和**积木报表** 🧱 (JimuReport)。
*   这两个工具会直接去数据库里查询那些准备好的**“报表视图”** 👀 (dbt Views)，然后生成各种图表和报告。

## 5. 🖥️ 报表怎么展示给你？

*   后台服务 (BE) ⚙️ 会告诉前台界面 (FE) ✨ 去哪里加载这些报表工具生成的图表。
*   前台界面 (FE) ✨ 会在网页里嵌入一个**小窗口** 🖼️ (iframe)，把 Metabase 或积木报表生成的图表直接显示给你看。

## 总结 🏁

这个系统就像一个自动化工厂：你（用户 👤）通过店面（前端 ✨）下单（操作🖱️），后台（后端 ⚙️）接收订单，然后流水线（数据处理工具 💧💨🐍）把原材料（Excel/CSV 📄）加工成标准产品（规整的数据 ✨），存放到仓库（数据库 🗄️🐘）里。最后，质检部门（报表工具 📊Ⓜ️🧱）从仓库里拿出产品生成报告，通过店面的展示窗口（iframe 🖼️）给你看结果。整个过程由 Alembic 🧪 负责维护仓库结构，后台服务 ⚙️ 统一调度。
 